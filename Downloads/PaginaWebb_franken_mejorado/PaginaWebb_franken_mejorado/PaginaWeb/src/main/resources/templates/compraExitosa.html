<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Compra Exitosa</title>
    <link rel="stylesheet" th:href="@{/css/factura.css}">
</head>

<body>

<div class="factura-container">

    <div class="factura-card">
        <h2 class="titulo">Factura de Compra</h2>

        <!-- Datos del comprador -->
        <div class="datos-section">
            <p><strong>Comprador:</strong> <span th:text="${usuario.nombre}"></span></p>
            <p><strong>Dirección:</strong> <span th:text="${direccion}"></span></p>
            <p><strong>Fecha:</strong> <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy')}"></span></p>
        </div>

        <hr>

        <!-- Lista de productos -->
        <h3>Productos comprados</h3>

        <table class="tabla-productos">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Cant.</th>
                    <th>Precio</th>
                    <th>Total</th>
                </tr>
            </thead>

         <tbody><tbody>
    <tr th:each="item : ${carrito}">
        <td th:text="${item.opcion.nombre}"></td>
        <td th:text="${item.tamano}"></td>
        <td th:text="${item.cantidad}"></td>

        <!-- Precio unitario -->
        <td>$ <span th:text="${item.precio}"></span></td>

        <!-- Total -->
        <td>$ <span th:text="${item.precio * item.cantidad}"></span></td>
    </tr>
</tbody>



        </table>

        <hr>

        <!-- Totales -->
        <div class="totales">
            <p><strong>Total productos:</strong> <span th:text="${carrito.size()}"></span></p>
            <p class="precio-total">
                <strong>Total a pagar:</strong> $ <span th:text="${total}"></span>
            </p>
        </div>

        <div class="mensaje-final">
            <p th:text="${mensaje}"></p>
        </div>

        <a class="btn-volver" th:href="@{/menu}">Volver al menú</a>
    </div>
</div>

</body>
</html>
