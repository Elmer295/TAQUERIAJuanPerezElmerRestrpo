<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Registro de Usuario</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/registro.css}">
</head>

<body>

<div class="background-blur parallax"></div>
<canvas id="particles"></canvas>

<div class="register-container">
    <div class="register-card glow-border">

        <h3 class="text-center mb-4 text-primary login-title">Registro de Usuario</h3>

        <!-- Mensaje de error si el correo ya est√° registrado -->
        <div th:if="${error}" class="alert alert-danger text-center" th:text="${error}"></div>

        <form th:action="@{/registro}" method="post">

            <div class="mb-3">
                <label class="form-label">Nombre completo</label>
                <input type="text" class="form-control animated-input" name="nombre" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Direcci√≥n</label>
                <input type="text" class="form-control animated-input" name="direccion" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Correo electr√≥nico</label>
                <input type="email" class="form-control animated-input" name="correo" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Tel√©fono</label>
                <input type="text" class="form-control animated-input" name="telefono" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Contrase√±a</label>
                <div class="input-group">
                    <input id="passField" type="password" class="form-control animated-input" name="contrasena" required>
                    <button class="btn btn-outline-secondary" type="button" onclick="togglePass()">üëÅÔ∏è</button>
                </div>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-login">Registrarse</button>
            </div>

        </form>

        <p class="mt-3 text-center">
            ¬øYa tienes una cuenta?
            <a th:href="@{/login}" class="text-decoration-none">Inicia sesi√≥n</a>
        </p>

    </div>
</div>

<script>
/* Mostrar / ocultar contrase√±a */
function togglePass() {
    const field = document.getElementById("passField");
    field.type = field.type === "password" ? "text" : "password";
}

/* Parallax suave */
document.addEventListener("mousemove", e => {
    const bg = document.querySelector(".parallax");
    let x = (e.clientX / window.innerWidth) * 10;
    let y = (e.clientY / window.innerHeight) * 10;
    bg.style.transform = `translate(${x}px, ${y}px)`;
});

/* Part√≠culas flotando */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];

for (let i = 0; i < 55; i++) {
    particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 2 + 1,
        speedX: (Math.random() - 0.5) * 0.6,
        speedY: (Math.random() - 0.5) * 0.6
    });
}

function animateParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    particles.forEach(p => {
        p.x += p.speedX;
        p.y += p.speedY;

        if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
        if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;

        ctx.fillStyle = "rgba(255,255,255,0.8)";
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
    });

    requestAnimationFrame(animateParticles);
}

animateParticles();
</script>

</body>
</html>
