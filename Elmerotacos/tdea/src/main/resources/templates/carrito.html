<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ğŸ›’ Carrito de Compras - TaquerÃ­a ElmeroTaco</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/carrito.css" rel="stylesheet">
    <th:block th:replace="fragments/head :: head"></th:block>
</head>

<body>
<th:block th:replace="fragments/navbar :: navbar"></th:block>

<div class="container carrito-container py-5">

    <h1 class="mb-4 text-center">ğŸ›’ Tu Carrito de Tacos</h1>

    <!-- MENSAJE OPCIONAL -->
    <div class="alert alert-info text-center"
         th:if="${mensaje}"
         th:text="${mensaje}">
    </div>

    <!-- TABLA DEL CARRITO -->
    <table class="table table-hover align-middle text-center">
        <thead class="table-warning">
        <tr>
            <th>Imagen</th>
            <th>Nombre</th>
            <th>Cantidad</th>
            <th>Precio</th>
            <th>Subtotal</th>
            <th>Acciones</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="item : ${carrito}">

            <td>
                <img th:src="@{'/img/' + ${item.taco.imagen}}"
                     th:alt="${item.taco.nombre}"
                     class="item-img">
            </td>

            <td th:text="${item.taco.nombre}">Taco</td>

            <td th:text="${item.cantidad}">1</td>

            <td th:text="'$' + ${item.precio}">0</td>

            <td th:text="'$' + (${item.precio} * ${item.cantidad})">0</td>

            <!-- ELIMINAR ITEM -->
            <td>
                <a th:href="@{'/menu/carrito/eliminar/' + ${item.id}}"
                   class="btn btn-sm btn-danger">
                    ğŸ—‘ï¸
                </a>
            </td>

        </tr>
        </tbody>
    </table>

    <!-- TOTAL -->
    <div class="d-flex justify-content-between align-items-center mt-3">
        <h4 class="mb-0">
            Total: <span class="text-success" th:text="'$' + ${total}">$0</span>
        </h4>

        <button class="btn btn-success" disabled>âœ” Confirmar compra (no implementado)</button>
    </div>

    <!-- BOTONES INFERIORES -->
    <div class="text-center mt-4">
        <a th:href="@{/tacos/menu}" class="btn btn-outline-primary">â¬… Seguir comprando</a>

        <a th:href="@{/menu/carrito/cancelar}" class="btn btn-outline-danger ms-2">
            ğŸ—‘ Vaciar carrito
        </a>
    </div>

</div>

<th:block th:replace="fragments/footer :: footer"></th:block>

</body>
</html>